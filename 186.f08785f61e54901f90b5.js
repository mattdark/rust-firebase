(window.webpackJsonp=window.webpackJsonp||[]).push([[186],{264:function(t,r,n){"use strict";n.r(r),n.d(r,"DeckgoBarChart",function(){return u});var e=n(315),i=n(5),a=n(316),o=n(313),u=function(){function t(){this.separator=";",this.marginTop=32,this.marginBottom=32,this.marginLeft=32,this.marginRight=32}return t.prototype.componentDidLoad=function(){return e.a(this,void 0,void 0,function(){return e.b(this,function(t){switch(t.label){case 0:return[4,this.draw()];case 1:return t.sent(),[2]}})})},t.prototype.redraw=function(){return e.a(this,void 0,void 0,function(){return e.b(this,function(t){switch(t.label){case 0:return[4,this.draw()];case 1:return t.sent(),[2]}})})},t.prototype.draw=function(){var t=this;return new Promise(function(r){return e.a(t,void 0,void 0,function(){var t,n,i,o,u,c;return e.b(this,function(e){switch(e.label){case 0:return this.width&&this.height&&this.src?(t=(t=a.a.initSvg(this.el,this.width+this.marginLeft+this.marginRight,this.height+this.marginTop+this.marginBottom)).append("g").attr("transform","translate("+this.marginLeft+","+this.marginTop+")"),[4,this.fetchData()]):(r(),[2]);case 1:return n=e.sent(),[4,this.initAxis(n)];case 2:return i=e.sent(),u=i.x1,[4,this.drawAxis(t,o=i.x0,c=i.y)];case 3:return e.sent(),[4,this.drawBars(t,o,u,c,n)];case 4:return e.sent(),r(),[2]}})})})},t.prototype.drawAxis=function(t,r,n){var e=this;return new Promise(function(i){var a=Object(o.b)(r),u=Object(o.c)(n);t.append("g").attr("class","axis axis-x").attr("transform","translate(0,"+e.height+")").call(a),t.append("g").attr("class","axis axis-y").call(u),i()})},t.prototype.initAxis=function(t){var r=this;return new Promise(function(n){var e=Object(a.b)().rangeRound([0,r.width]).paddingInner(.1),i=Object(a.b)().padding(.05),u=Object(a.c)().rangeRound([r.height,0]),c=t.map(function(t){return t.label}),s=t[0].values.map(function(t){return t.key});e.domain(c),i.domain(s).rangeRound([0,e.bandwidth()]),u.domain([0,Object(o.a)(t,function(t){return Object(o.a)(t.values,function(t){return t.value})})]),n({x0:e,x1:i,y:u})})},t.prototype.drawBars=function(t,r,n,e,i){var a=this;return new Promise(function(o){t.append("g").selectAll("g").data(i).enter().append("g").attr("transform",function(t){return"translate("+r(t.label)+",0)"}).selectAll("rect").data(function(t){return t.values}).enter().append("rect").attr("x",function(t){return n(t.key)}).attr("y",function(t){return e(t.value)}).attr("width",n.bandwidth()).attr("height",function(t){return a.height-e(t.value)}).attr("style",function(t){return"fill: var(--deckgo-chart-fill-color-"+t.key+"); fill-opacity: var(--deckgo-chart-fill-opacity-"+t.key+"); stroke: var(--deckgo-chart-stroke-"+t.key+"); stroke-width: var(--deckgo-chart-stroke-width-"+t.key+")"}),o()})},t.prototype.fetchData=function(){return e.a(this,void 0,void 0,function(){var t=this;return e.b(this,function(r){return[2,new Promise(function(r){return e.a(t,void 0,void 0,function(){var t,n,i,a=this;return e.b(this,function(e){switch(e.label){case 0:return this.src?[4,fetch(this.src)]:(r([]),[2]);case 1:return[4,e.sent().text()];case 2:return(t=e.sent())?!(n=t.split("\n"))||n.length<=0?(r([]),[2]):(i=[],n.forEach(function(t){var r=t.split(a.separator);if(r&&r.length>=2){for(var n=[],e=1;e<r.length;e++){var o=parseInt(r[e]);isNaN(o)||n.push({key:"bar"+e,value:o})}i.push({label:r[0],values:n})}}),r(i),[2]):(r([]),[2])}})})})]})})},t.prototype.render=function(){return Object(i.b)("svg",null)},Object.defineProperty(t,"is",{get:function(){return"deckgo-bar-chart"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"encapsulation",{get:function(){return"shadow"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"properties",{get:function(){return{draw:{method:!0},el:{elementRef:!0},height:{type:Number,attr:"height",watchCallbacks:["redraw"]},marginBottom:{type:Number,attr:"margin-bottom"},marginLeft:{type:Number,attr:"margin-left"},marginRight:{type:Number,attr:"margin-right"},marginTop:{type:Number,attr:"margin-top"},separator:{type:String,attr:"separator"},src:{type:String,attr:"src",watchCallbacks:["redraw"]},width:{type:Number,attr:"width",watchCallbacks:["redraw"]}}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"style",{get:function(){return"text{fill:var(--deckgo-chart-text-color);display:var(--deckgo-chart-text-display)}.axis line,.axis path{fill:none;stroke:var(--deckgo-chart-axis-color,#000);shape-rendering:crispEdges}"},enumerable:!0,configurable:!0}),t}()},313:function(t,r,n){"use strict";function e(t,r){return t<r?-1:t>r?1:t>=r?0:NaN}n.d(r,"a",function(){return o}),n.d(r,"b",function(){return y}),n.d(r,"c",function(){return k}),n.d(r,"d",function(){return a}),n.d(r,"e",function(){return u});var i;1===(i=e).length&&(i=function(t){return function(r,n){return e(t(r),n)}}(i));function a(t,r){var n,e;if(void 0===r)for(var i=0,a=t;i<a.length;i++)null!=(s=a[i])&&s>=s&&(void 0===n?n=e=s:(n>s&&(n=s),e<s&&(e=s)));else for(var o=-1,u=0,c=t;u<c.length;u++){var s;null!=(s=r(s=c[u],++o,t))&&s>=s&&(void 0===n?n=e=s:(n>s&&(n=s),e<s&&(e=s)))}return[n,e]}function o(t,r){var n;if(void 0===r)for(var e=0,i=t;e<i.length;e++)null!=(c=i[e])&&c>=c&&(void 0===n||n<c)&&(n=c);else for(var a=-1,o=0,u=t;o<u.length;o++){var c;null!=(c=r(c=u[o],++a,t))&&c>=c&&(void 0===n||n<c)&&(n=c)}return n}function u(t,r){var n;if(void 0===r)for(var e=0,i=t;e<i.length;e++)null!=(c=i[e])&&c>=c&&(void 0===n||n>c)&&(n=c);else for(var a=-1,o=0,u=t;o<u.length;o++){var c;null!=(c=r(c=u[o],++a,t))&&c>=c&&(void 0===n||n>c)&&(n=c)}return n}var c=Array.prototype.slice;function s(t){return t}var l=1,f=2,h=3,d=4,g=1e-6;function p(t){return"translate("+(t+.5)+",0)"}function m(t){return"translate(0,"+(t+.5)+")"}function v(){return!this.__axis}function b(t,r){var n=[],e=null,i=null,a=6,o=6,u=3,b=t===l||t===d?-1:1,y=t===d||t===f?"x":"y",k=t===l||t===h?p:m;function w(c){var p=null==e?r.ticks?r.ticks.apply(r,n):r.domain():e,m=null==i?r.tickFormat?r.tickFormat.apply(r,n):s:i,w=Math.max(a,0)+u,x=r.range(),O=+x[0]+.5,j=+x[x.length-1]+.5,A=(r.bandwidth?function(t){var r=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(r=Math.round(r)),function(n){return+t(n)+r}}:function(t){return function(r){return+t(r)}})(r.copy()),N=c.selection?c.selection():c,P=N.selectAll(".domain").data([null]),C=N.selectAll(".tick").data(p,r).order(),M=C.exit(),R=C.enter().append("g").attr("class","tick"),B=C.select("line"),S=C.select("text");P=P.merge(P.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),C=C.merge(R),B=B.merge(R.append("line").attr("stroke","currentColor").attr(y+"2",b*a)),S=S.merge(R.append("text").attr("fill","currentColor").attr(y,b*w).attr("dy",t===l?"0em":t===h?"0.71em":"0.32em")),c!==N&&(P=P.transition(c),C=C.transition(c),B=B.transition(c),S=S.transition(c),M=M.transition(c).attr("opacity",g).attr("transform",function(t){return isFinite(t=A(t))?k(t):this.getAttribute("transform")}),R.attr("opacity",g).attr("transform",function(t){var r=this.parentNode.__axis;return k(r&&isFinite(r=r(t))?r:A(t))})),M.remove(),P.attr("d",t===d||t==f?o?"M"+b*o+","+O+"H0.5V"+j+"H"+b*o:"M0.5,"+O+"V"+j:o?"M"+O+","+b*o+"V0.5H"+j+"V"+b*o:"M"+O+",0.5H"+j),C.attr("opacity",1).attr("transform",function(t){return k(A(t))}),B.attr(y+"2",b*a),S.attr(y,b*w).text(m),N.filter(v).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===f?"start":t===d?"end":"middle"),N.each(function(){this.__axis=A})}return w.scale=function(t){return arguments.length?(r=t,w):r},w.ticks=function(){return n=c.call(arguments),w},w.tickArguments=function(t){return arguments.length?(n=null==t?[]:c.call(t),w):n.slice()},w.tickValues=function(t){return arguments.length?(e=null==t?null:c.call(t),w):e&&e.slice()},w.tickFormat=function(t){return arguments.length?(i=t,w):i},w.tickSize=function(t){return arguments.length?(a=o=+t,w):a},w.tickSizeInner=function(t){return arguments.length?(a=+t,w):a},w.tickSizeOuter=function(t){return arguments.length?(o=+t,w):o},w.tickPadding=function(t){return arguments.length?(u=+t,w):u},w}function y(t){return b(h,t)}function k(t){return b(d,t)}}}]);